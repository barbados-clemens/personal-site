<p *ngIf="signUpRes | async as res;else form">
  <ng-container *ngIf="res?.error">
    There was a problem signing up üôÅ
    <br>
    <span style="color: var(--v2-red);">
    {{!!res?.error?.error ? res?.error?.error : res.error}}
    </span>
    <br>
    <button class="btn" (click)="signUpRes = null">Try Again</button>
  </ng-container>
  <ng-container *ngIf="res?.success">
    {{res?.success}}
  </ng-container>
</p>

<ng-template #form>
  <form method="post" [formGroup]="newsletterForm">

    <label class="info h5" for="newsletter-email">Sign up for a monthly newsletter</label>
    <small class="info">Don't worry, I won't spam you! <br> One email a month at most which you can unsubscribe from at
      anytime.</small>

    <input tabindex="0"
           type="email"
           class="text-input"
           name="newsletter-email"
           id="newsletter-email"
           placeholder="Your Email"
           aria-labelledby="Sign up for email newsletters"
           formControlName="email"
    />

    <div hidden>
      <label>
        Don‚Äôt fill this out:
        <input name="bot-field" formControlName="bot"/>
      </label>
    </div>


    <span class="text_small bad-input"
          *ngIf="newsletterForm.get('email').touched
        && newsletterForm.get('email').dirty
        && newsletterForm.get('email').hasError('email');
        else submitBtn">
  &nbsp; Invalid email
</span>
  </form>
  <ng-template #submitBtn>
    <button class="btn" (click)="submit()" [disabled]="!newsletterForm.get('email').valid">Submit</button>
  </ng-template>
  {{ isLoading }}
</ng-template>
